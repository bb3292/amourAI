# ═══════════════════════════════════════════════════════════════
# Blaxel Agent Deployment Configuration for DL-CRC
# ═══════════════════════════════════════════════════════════════
# Deploy with: bl deploy
# Local dev:   bl serve --hotreload

name = "dlcrc-orchestrator"
type = "agent"

# Resources used by this agent
models = ["claude-sonnet"]
functions = []
agents = []

[env]
DATABASE_URL = "sqlite+aiosqlite:///./dlcrc.db"

[runtime]
timeout = 900       # 15 min max for long pipelines
memory = 2048       # 2GB for PDF processing + LLM calls

[entrypoint]
prod = "uvicorn main:app --host 0.0.0.0 --port $PORT"
dev = "uvicorn main:app --host 0.0.0.0 --port 8000 --reload"

[[triggers]]
  id = "dlcrc-api"
  type = "http"
[triggers.configuration]
  path = "agents/dlcrc-orchestrator/sync"
  retry = 2

[[triggers]]
  id = "dlcrc-api-async"
  type = "http-async"
[triggers.configuration]
  path = "agents/dlcrc-orchestrator/async"
  retry = 2
